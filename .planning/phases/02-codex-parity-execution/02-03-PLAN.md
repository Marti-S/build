---
phase: 02-codex-parity-execution
plan: 03
type: execute
wave: 2
depends_on: ["02-02"]
files_modified:
  - get-shit-done/templates/claude/AGENTS.md
  - get-shit-done/templates/opencode/AGENTS.md
  - .planning/phases/02-codex-parity-execution/02-03-SUMMARY.md
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Repository includes baseline Claude AGENTS guidance for /gsd (Codex-free)"
    - "Repository includes baseline OpenCode AGENTS guidance for /gsd (Codex-free)"
    - "Baseline templates allow verification that Codex installs do not alter Claude/OpenCode guidance"
  artifacts:
    - path: "get-shit-done/templates/claude/AGENTS.md"
      provides: "Baseline Claude GSD guidance with GSD marker block"
    - path: "get-shit-done/templates/opencode/AGENTS.md"
      provides: "Baseline OpenCode GSD guidance with GSD marker block"
  key_links:
    - from: "get-shit-done/templates/claude/AGENTS.md"
      to: "GSD marker block"
      via: "GSD guidance section"
      pattern: "<!-- GSD:START -->"
    - from: "get-shit-done/templates/opencode/AGENTS.md"
      to: "GSD marker block"
      via: "GSD guidance section"
      pattern: "<!-- GSD:START -->"
---

<objective>
Restore baseline Claude/OpenCode AGENTS templates so Codex installs can be verified as non-invasive.

Purpose: Close the verification gap by ensuring baseline guidance exists and is Codex-free.
Output: Claude and OpenCode AGENTS templates with GSD marker blocks and no Codex-specific guidance.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-codex-parity-execution/02-CONTEXT.md
@.planning/phases/02-codex-parity-execution/02-RESEARCH.md
@.planning/phases/02-codex-parity-execution/02-codex-parity-execution-VERIFICATION.md

@get-shit-done/templates/codex/AGENTS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Ensure baseline Claude AGENTS template exists</name>
  <files>get-shit-done/templates/claude/AGENTS.md</files>
  <action>
Create or update the Claude AGENTS template to include the GSD marker block and Codex-free guidance.

- Ensure directory `get-shit-done/templates/claude/` exists.
- Ensure `AGENTS.md` contains:
  - Title line: `# AGENTS.md`
  - Intro: "This file provides repo-level guidance for Claude." and the note about the managed block.
  - GSD block with header "## GSD /gsd guidance (Claude)" and these bullets:
    - Use the /gsd commands for planning and execution in this repo.
    - Follow each command's objective, workflow, and output constraints.
    - Write artifacts under `.planning/` only.
    - Treat the /gsd command name as the entrypoint you are executing.
    - Keep outputs concise and structured for CLI consumption.
    - Ask one targeted question only when blocked, with a recommended default.
    - Do not invent command names or behaviors.
  - Notes section with two bullets matching tone of Codex template.
- Exclude any Codex-specific items:
  - Do NOT mention Codex, repo-scoped Codex config, or `@~/.claude/get-shit-done` mapping.
  - Do NOT include the explicit `commands/gsd/<command>.md` mapping line.
  </action>
  <verify>Run `rg -n "Codex|@~/.claude/get-shit-done|commands/gsd" get-shit-done/templates/claude/AGENTS.md || true` and confirm no matches.</verify>
  <done>Claude AGENTS template exists with a GSD marker block and no Codex-specific guidance.</done>
</task>

<task type="auto">
  <name>Task 2: Ensure baseline OpenCode template matches Claude</name>
  <files>get-shit-done/templates/opencode/AGENTS.md; get-shit-done/templates/claude/AGENTS.md</files>
  <action>
Create or update the OpenCode AGENTS template to mirror the Claude template and remain Codex-free.

- Ensure directory `get-shit-done/templates/opencode/` exists.
- Ensure `AGENTS.md` matches the Claude template structure with these differences:
  - Intro line references OpenCode instead of Claude.
  - GSD block header reads "## GSD /gsd guidance (OpenCode)".
- Keep the bullet list identical to Claude's list and exclude Codex-specific items (same exclusions as Task 1).
- Confirm both files include `<!-- GSD:START -->` and `<!-- GSD:END -->` markers.
  </action>
  <verify>Run `rg -n "<!-- GSD:START -->" get-shit-done/templates/claude/AGENTS.md get-shit-done/templates/opencode/AGENTS.md` and `rg -n "Codex|@~/.claude/get-shit-done|commands/gsd" get-shit-done/templates/claude/AGENTS.md get-shit-done/templates/opencode/AGENTS.md || true` (expect no matches for the second).</verify>
  <done>OpenCode template mirrors Claude structure, includes GSD markers, and contains no Codex-specific guidance.</done>
</task>

<task type="auto">
  <name>Task 3: Write gap-closure summary</name>
  <files>.planning/phases/02-codex-parity-execution/02-03-SUMMARY.md</files>
  <action>
Create the execution summary using the standard summary template and capture verification steps.

- Follow `@~/.config/opencode/get-shit-done/templates/summary.md`.
- Note the baseline templates ensured/updated and the grep checks run.
  </action>
  <verify>Open `.planning/phases/02-codex-parity-execution/02-03-SUMMARY.md` and confirm it follows the summary template with outcomes and verification notes.</verify>
  <done>02-03 summary exists with outcomes and verification details.</done>
</task>

</tasks>

<verification>
- Baseline Claude/OpenCode templates exist with GSD marker blocks.
- No Codex-specific guidance appears in either template.
</verification>

<success_criteria>
- `get-shit-done/templates/claude/AGENTS.md` and `get-shit-done/templates/opencode/AGENTS.md` exist and are Codex-free.
- GSD marker blocks are present in both templates.
- Verification report can confirm Claude/OpenCode guidance remains unchanged after Codex support installation.
</success_criteria>

<output>
After completion, create `.planning/phases/02-codex-parity-execution/02-03-SUMMARY.md`
</output>
