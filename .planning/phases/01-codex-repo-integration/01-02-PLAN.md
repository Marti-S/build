---
phase: 01-codex-repo-integration
plan: 02
type: execute
wave: 2
depends_on: ["01"]
files_modified:
  - bin/install.js
  - README.md
autonomous: true

must_haves:
  truths:
    - "User can run the installer and see /gsd Codex skills under `.codex/skills` in the repo"
    - "Each Codex skill shows the same name and description as its /gsd command"
    - "Repo root `AGENTS.md` includes /gsd usage guidance after install"
  artifacts:
    - path: "bin/install.js"
      provides: "Codex uninstall support and safe AGENTS cleanup"
      contains: "uninstall"
    - path: "README.md"
      provides: "Codex install/uninstall usage guidance"
      min_lines: 50
  key_links:
    - from: "bin/install.js"
      to: ".codex/skills"
      via: "codex uninstall cleanup"
      pattern: "\\.codex/skills"
    - from: "README.md"
      to: "npx get-shit-done-cc"
      via: "Codex install examples"
      pattern: "--codex"
---

<objective>
Finish Codex repo integration with uninstall support and updated user docs.

Purpose: Make Codex installs reversible and visible in README usage guidance.
Output: Codex uninstall cleanup + README examples for Codex install/uninstall.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-codex-repo-integration/01-RESEARCH.md
@bin/install.js
@README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Codex uninstall cleanup for repo installs</name>
  <files>bin/install.js</files>
  <action>
    Extend uninstall handling for the Codex runtime:
    - Remove only `.codex/skills/gsd-*` directories (leave non-GSD skills intact).
    - Remove the GSD block from repo-root `AGENTS.md` using the same marker logic used during install.
    - If `AGENTS.md` becomes empty or contains only whitespace after removing the GSD block, delete the file; otherwise preserve remaining content unchanged.
    - Ensure uninstall does not touch Claude/OpenCode directories or any Codex user-level config files.
  </action>
  <verify>node bin/install.js --codex --local --uninstall</verify>
  <done>GSD Codex skills are removed and AGENTS.md no longer includes the GSD block.</done>
</task>

<task type="auto">
  <name>Task 2: Document Codex install and uninstall usage</name>
  <files>README.md</files>
  <action>
    Update README to include Codex CLI in install guidance:
    - Add Codex as a runtime option in the interactive install description.
    - Add non-interactive examples for `--codex --local` and clarify that Codex installs are repo-scoped under `.codex/skills` and `AGENTS.md`.
    - Add Codex uninstall example under the uninstall section (local only).
    Keep wording consistent with existing tone and avoid introducing new commands or config.toml instructions.
  </action>
  <verify>Manual check: README includes Codex install/uninstall examples and mentions `.codex/skills` + `AGENTS.md`.</verify>
  <done>README documents how to install and uninstall Codex repo integration.</done>
</task>

</tasks>

<verification>
- Codex uninstall removes GSD skills and cleans up AGENTS.md without touching other runtimes.
- README includes Codex install/uninstall examples and repo scope details.
</verification>

<success_criteria>
- Users can install and uninstall Codex repo-scoped skills with clear documented steps.
- Codex guidance remains repo-scoped and additive to existing Claude/OpenCode behavior.
</success_criteria>

<output>
After completion, create `.planning/phases/01-codex-repo-integration/01-02-SUMMARY.md`
</output>
